# å¯¼èˆªæ è·¯ç”±é«˜äº®åŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

ä¸ºå¯¼èˆªæ æ·»åŠ äº†å½“å‰è·¯ç”±é«˜äº®æ˜¾ç¤ºåŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°è‡ªå·±å½“å‰åœ¨å“ªä¸ªé¡µé¢ã€‚

## å®ç°æ•ˆæœ

### è§†è§‰æ•ˆæœ

**æ´»è·ƒçŠ¶æ€ï¼ˆå½“å‰é¡µé¢ï¼‰ï¼š**
- ğŸ¨ æ¸å˜èƒŒæ™¯ï¼šè“è‰²åˆ°ç´«è‰²æ¸å˜
- âœ¨ è¾¹æ¡†é«˜äº®ï¼šè“è‰²å‘å…‰è¾¹æ¡†
- ğŸ’¡ é˜´å½±æ•ˆæœï¼šè½»å¾®é˜´å½±æå‡å±‚æ¬¡
- ğŸ”¤ æ–‡æœ¬é¢œè‰²ï¼šç™½è‰²

**éæ´»è·ƒçŠ¶æ€ï¼ˆå…¶ä»–é¡µé¢ï¼‰ï¼š**
- ğŸ”˜ é€æ˜èƒŒæ™¯
- ğŸ“ æ–‡æœ¬é¢œè‰²ï¼šç°è‰²
- ğŸ–±ï¸ æ‚¬åœæ•ˆæœï¼šå˜ç™½è‰²ï¼Œæ·»åŠ æ·¡èƒŒæ™¯

### ç¤ºä¾‹å±•ç¤º

```
å½“ç”¨æˆ·åœ¨"è¯¾ç¨‹"é¡µé¢æ—¶ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“š Web3 University  ğŸ é¦–é¡µ [ğŸ“šè¯¾ç¨‹] â•åˆ›å»º ğŸ’°ä»£å¸ ğŸ‘¤ä¸ªäºº â”‚
â”‚                            â†‘                   â”‚
â”‚                      è“ç´«æ¸å˜èƒŒæ™¯+è¾¹æ¡†é«˜äº®          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒä»£ç 

### 1. å¯¼å…¥ useLocation Hook

```jsx
import { Link, Outlet, useLocation } from 'react-router-dom';

export default function Layout() {
  const location = useLocation();
  // ...
}
```

### 2. åˆ¤æ–­è·¯ç”±æ˜¯å¦æ´»è·ƒ

```jsx
// åˆ¤æ–­é“¾æ¥æ˜¯å¦ä¸ºå½“å‰æ´»è·ƒè·¯ç”±
const isActive = (path) => {
  if (path === '/') {
    // é¦–é¡µéœ€è¦ç²¾ç¡®åŒ¹é…
    return location.pathname === '/';
  }
  // å…¶ä»–é¡µé¢ä½¿ç”¨å‰ç¼€åŒ¹é…
  return location.pathname.startsWith(path);
};
```

**é€»è¾‘è¯´æ˜ï¼š**
- **é¦–é¡µ** (`'/'`)ï¼šç²¾ç¡®åŒ¹é…ï¼Œåªæœ‰è·¯å¾„å®Œå…¨æ˜¯ `/` æ‰é«˜äº®
- **å…¶ä»–é¡µé¢**ï¼šå‰ç¼€åŒ¹é…ï¼Œä¾‹å¦‚ï¼š
  - `/courses` ä¼šåŒ¹é… `/courses`ã€`/courses/1`ã€`/courses/create` ç­‰
  - `/profile` ä¼šåŒ¹é… `/profile`ã€`/profile/settings` ç­‰

### 3. åŠ¨æ€ç”Ÿæˆæ ·å¼ç±»

```jsx
// è·å–å¯¼èˆªé“¾æ¥çš„æ ·å¼ç±»
const getLinkClass = (path) => {
  const baseClass = "flex items-center space-x-1.5 transition-all duration-300 whitespace-nowrap px-3 py-2 rounded-lg";

  const activeClass = "bg-gradient-to-r from-blue-500/20 to-purple-600/20 text-white border border-blue-500/30 shadow-lg";

  const inactiveClass = "text-gray-300 hover:text-white hover:bg-white/5";

  return `${baseClass} ${isActive(path) ? activeClass : inactiveClass}`;
};
```

**æ ·å¼ç±»è¯´æ˜ï¼š**

#### åŸºç¡€ç±» (baseClass)
```css
flex items-center        /* Flex å¸ƒå±€ï¼Œå‚ç›´å±…ä¸­ */
space-x-1.5             /* å›¾æ ‡å’Œæ–‡æœ¬é—´è· */
transition-all          /* æ‰€æœ‰å±æ€§è¿‡æ¸¡åŠ¨ç”» */
duration-300            /* åŠ¨ç”»æ—¶é•¿ 300ms */
whitespace-nowrap       /* ä¸æ¢è¡Œ */
px-3 py-2              /* å†…è¾¹è· */
rounded-lg             /* åœ†è§’ */
```

#### æ´»è·ƒçŠ¶æ€ç±» (activeClass)
```css
bg-gradient-to-r from-blue-500/20 to-purple-600/20  /* è“åˆ°ç´«æ¸å˜èƒŒæ™¯ï¼Œ20% é€æ˜åº¦ */
text-white                                           /* ç™½è‰²æ–‡å­— */
border border-blue-500/30                           /* è“è‰²è¾¹æ¡†ï¼Œ30% é€æ˜åº¦ */
shadow-lg                                           /* å¤§é˜´å½± */
```

#### éæ´»è·ƒçŠ¶æ€ç±» (inactiveClass)
```css
text-gray-300           /* ç°è‰²æ–‡å­— */
hover:text-white        /* æ‚¬åœæ—¶å˜ç™½è‰² */
hover:bg-white/5        /* æ‚¬åœæ—¶æ·»åŠ æ·¡ç™½è‰²èƒŒæ™¯ */
```

### 4. åº”ç”¨åˆ°å¯¼èˆªé“¾æ¥

```jsx
<Link
  to="/courses"
  className={getLinkClass('/courses')}
>
  <BookOpen className="h-4 w-4 flex-shrink-0" />
  <span className="text-sm">è¯¾ç¨‹</span>
</Link>
```

## å®Œæ•´å®ç°ä»£ç 

```jsx
import { Link, Outlet, useLocation } from 'react-router-dom';

export default function Layout() {
  const location = useLocation();

  // åˆ¤æ–­é“¾æ¥æ˜¯å¦ä¸ºå½“å‰æ´»è·ƒè·¯ç”±
  const isActive = (path) => {
    if (path === '/') {
      return location.pathname === '/';
    }
    return location.pathname.startsWith(path);
  };

  // è·å–å¯¼èˆªé“¾æ¥çš„æ ·å¼ç±»
  const getLinkClass = (path) => {
    const baseClass = "flex items-center space-x-1.5 transition-all duration-300 whitespace-nowrap px-3 py-2 rounded-lg";
    const activeClass = "bg-gradient-to-r from-blue-500/20 to-purple-600/20 text-white border border-blue-500/30 shadow-lg";
    const inactiveClass = "text-gray-300 hover:text-white hover:bg-white/5";

    return `${baseClass} ${isActive(path) ? activeClass : inactiveClass}`;
  };

  return (
    <nav>
      <Link to="/" className={getLinkClass('/')}>
        <Home className="h-4 w-4" />
        <span>é¦–é¡µ</span>
      </Link>
      <Link to="/courses" className={getLinkClass('/courses')}>
        <BookOpen className="h-4 w-4" />
        <span>è¯¾ç¨‹</span>
      </Link>
      {/* æ›´å¤šé“¾æ¥... */}
    </nav>
  );
}
```

## æ ·å¼ç»†èŠ‚

### é¢œè‰²æ–¹æ¡ˆ

#### æ´»è·ƒçŠ¶æ€
```jsx
// èƒŒæ™¯æ¸å˜
from-blue-500/20      // èµ·å§‹ï¼šè“è‰² (#3B82F6)ï¼Œ20% ä¸é€æ˜åº¦
to-purple-600/20      // ç»“æŸï¼šç´«è‰² (#9333EA)ï¼Œ20% ä¸é€æ˜åº¦

// è¾¹æ¡†
border-blue-500/30    // è“è‰²è¾¹æ¡†ï¼Œ30% ä¸é€æ˜åº¦

// æ–‡æœ¬
text-white           // çº¯ç™½è‰²
```

#### éæ´»è·ƒçŠ¶æ€
```jsx
// é»˜è®¤
text-gray-300        // ç°è‰² (#D1D5DB)

// æ‚¬åœ
hover:text-white     // ç™½è‰²
hover:bg-white/5     // ç™½è‰²èƒŒæ™¯ï¼Œ5% ä¸é€æ˜åº¦
```

### åŠ¨ç”»æ•ˆæœ

```jsx
transition-all duration-300
```
- æ‰€æœ‰å±æ€§å˜åŒ–éƒ½æœ‰åŠ¨ç”»
- åŠ¨ç”»æ—¶é•¿ï¼š300 æ¯«ç§’
- åŒ…æ‹¬ï¼šèƒŒæ™¯è‰²ã€æ–‡æœ¬é¢œè‰²ã€è¾¹æ¡†ã€é˜´å½±ç­‰

### é—´è·è°ƒæ•´

```jsx
// ä¹‹å‰
space-x-6            // å¯¼èˆªé¡¹ä¹‹é—´é—´è· 1.5rem

// ç°åœ¨
space-x-2            // å¯¼èˆªé¡¹ä¹‹é—´é—´è· 0.5rem
```

åŸå› ï¼šæ·»åŠ äº†å†…è¾¹è· `px-3`ï¼Œæ‰€ä»¥å‡å°å¤–éƒ¨é—´è·ä»¥ä¿æŒæ•´ä½“ç´§å‡‘ã€‚

## è·¯ç”±åŒ¹é…è§„åˆ™

### ç²¾ç¡®åŒ¹é…ï¼ˆé¦–é¡µï¼‰

```jsx
if (path === '/') {
  return location.pathname === '/';
}
```

**ç¤ºä¾‹ï¼š**
- âœ… `/` â†’ é«˜äº®é¦–é¡µ
- âŒ `/courses` â†’ ä¸é«˜äº®é¦–é¡µ

### å‰ç¼€åŒ¹é…ï¼ˆå…¶ä»–é¡µé¢ï¼‰

```jsx
return location.pathname.startsWith(path);
```

**ç¤ºä¾‹ï¼š**

| å½“å‰è·¯å¾„ | `/courses` | `/profile` | `/buy-tokens` |
|---------|-----------|-----------|--------------|
| `/courses` | âœ… | âŒ | âŒ |
| `/courses/1` | âœ… | âŒ | âŒ |
| `/courses/create` | âœ… | âŒ | âŒ |
| `/profile` | âŒ | âœ… | âŒ |
| `/profile/settings` | âŒ | âœ… | âŒ |
| `/buy-tokens` | âŒ | âŒ | âœ… |

## å“åº”å¼è¡Œä¸º

### å¤§å±å¹•ï¼ˆâ‰¥ 1024pxï¼‰
- æ‰€æœ‰å¯¼èˆªé“¾æ¥æ˜¾ç¤º
- é«˜äº®æ•ˆæœå®Œæ•´æ˜¾ç¤º

### å°å±å¹•ï¼ˆ< 1024pxï¼‰
- å¯¼èˆªé“¾æ¥éšè—ï¼ˆ`hidden lg:flex`ï¼‰
- åªæ˜¾ç¤º Logo å’Œå³ä¾§æŒ‰é’®
- å¯ä»¥è€ƒè™‘æ·»åŠ ç§»åŠ¨ç«¯èœå•

## è‡ªå®šä¹‰æ ·å¼

### ä¿®æ”¹é«˜äº®é¢œè‰²

```jsx
// æ”¹ä¸ºç»¿è‰²ä¸»é¢˜
const activeClass = "bg-gradient-to-r from-green-500/20 to-teal-600/20 text-white border border-green-500/30 shadow-lg";
```

### ä¿®æ”¹èƒŒæ™¯é€æ˜åº¦

```jsx
// æ›´æ˜æ˜¾çš„èƒŒæ™¯
const activeClass = "bg-gradient-to-r from-blue-500/40 to-purple-600/40 text-white border border-blue-500/50 shadow-xl";
```

### æ·»åŠ å›¾æ ‡é«˜äº®

```jsx
<Link to="/courses" className={getLinkClass('/courses')}>
  <BookOpen
    className={`h-4 w-4 ${isActive('/courses') ? 'text-blue-400' : ''}`}
  />
  <span>è¯¾ç¨‹</span>
</Link>
```

### æ·»åŠ åŠ¨ç”»æ•ˆæœ

```jsx
const activeClass = "bg-gradient-to-r from-blue-500/20 to-purple-600/20 text-white border border-blue-500/30 shadow-lg transform scale-105";
```

## æµ‹è¯•åœºæ™¯

### âœ… æµ‹è¯•æ¸…å•

1. **é¦–é¡µ (`/`)**
   - [ ] åœ¨é¦–é¡µæ—¶ï¼Œ"é¦–é¡µ"é“¾æ¥é«˜äº®
   - [ ] åˆ‡æ¢åˆ°å…¶ä»–é¡µé¢ï¼Œ"é¦–é¡µ"é“¾æ¥ä¸å†é«˜äº®

2. **è¯¾ç¨‹é¡µ (`/courses`)**
   - [ ] åœ¨è¯¾ç¨‹åˆ—è¡¨é¡µï¼Œ"è¯¾ç¨‹"é“¾æ¥é«˜äº®
   - [ ] åœ¨è¯¾ç¨‹è¯¦æƒ…é¡µï¼ˆå¦‚ `/courses/1`ï¼‰ï¼Œ"è¯¾ç¨‹"é“¾æ¥ä»ç„¶é«˜äº®

3. **åˆ›å»ºè¯¾ç¨‹ (`/create-course`)**
   - [ ] åœ¨åˆ›å»ºè¯¾ç¨‹é¡µï¼Œ"åˆ›å»ºè¯¾ç¨‹"é“¾æ¥é«˜äº®
   - [ ] åˆ‡æ¢åˆ°å…¶ä»–é¡µé¢ï¼Œé«˜äº®æ¶ˆå¤±

4. **è´­ä¹°ä»£å¸ (`/buy-tokens`)**
   - [ ] åœ¨è´­ä¹°ä»£å¸é¡µï¼Œ"è´­ä¹°ä»£å¸"é“¾æ¥é«˜äº®

5. **ä¸ªäººä¸­å¿ƒ (`/profile`)**
   - [ ] åœ¨ä¸ªäººä¸­å¿ƒé¡µï¼Œ"ä¸ªäººä¸­å¿ƒ"é“¾æ¥é«˜äº®

6. **åŠ¨ç”»æ•ˆæœ**
   - [ ] ç‚¹å‡»é“¾æ¥æ—¶æœ‰å¹³æ»‘è¿‡æ¸¡
   - [ ] æ‚¬åœæ—¶æœ‰æ‚¬åœæ•ˆæœ
   - [ ] èƒŒæ™¯ã€è¾¹æ¡†ã€é˜´å½±å˜åŒ–æµç•…

7. **å“åº”å¼**
   - [ ] æ¡Œé¢ç«¯æ­£å¸¸æ˜¾ç¤º
   - [ ] ç§»åŠ¨ç«¯å¯¼èˆªéšè—ï¼ˆå¦‚é¢„æœŸï¼‰

## æµè§ˆå™¨å…¼å®¹æ€§

- âœ… Chrome 90+
- âœ… Firefox 88+
- âœ… Safari 14+
- âœ… Edge 90+

æ‰€æœ‰ä½¿ç”¨çš„ CSS ç‰¹æ€§éƒ½æœ‰è‰¯å¥½æ”¯æŒã€‚

## æ€§èƒ½ä¼˜åŒ–

### 1. ä½¿ç”¨ CSS ç±»è€Œéå†…è”æ ·å¼
```jsx
// âœ… å¥½ - CSS ç±»
className={getLinkClass(path)}

// âŒ é¿å… - å†…è”æ ·å¼
style={{ background: isActive ? '...' : '...' }}
```

### 2. ç¼“å­˜æ ·å¼ç±»ï¼ˆå¯é€‰ï¼‰
```jsx
const linkClasses = useMemo(() => ({
  '/': getLinkClass('/'),
  '/courses': getLinkClass('/courses'),
  // ...
}), [location.pathname]);
```

### 3. é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- `useLocation` åªåœ¨è·¯ç”±å˜åŒ–æ—¶è§¦å‘é‡æ¸²æŸ“
- æ ·å¼è®¡ç®—åœ¨å‡½æ•°å†…éƒ¨ï¼Œä¸ä¼šå½±å“æ€§èƒ½

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆé¦–é¡µè¦ç²¾ç¡®åŒ¹é…ï¼Ÿ
A: å¦‚æœä½¿ç”¨å‰ç¼€åŒ¹é…ï¼Œæ‰€æœ‰é¡µé¢è·¯å¾„éƒ½ä»¥ `/` å¼€å¤´ï¼Œä¼šå¯¼è‡´é¦–é¡µæ°¸è¿œé«˜äº®ã€‚

### Q: å­è·¯ç”±å¦‚ä½•å¤„ç†ï¼Ÿ
A: ä½¿ç”¨ `startsWith` å‰ç¼€åŒ¹é…ï¼Œå­è·¯ç”±ä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶è·¯ç”±çš„é«˜äº®çŠ¶æ€ã€‚

### Q: å¦‚ä½•ä¿®æ”¹é«˜äº®é¢œè‰²ï¼Ÿ
A: ä¿®æ”¹ `activeClass` ä¸­çš„é¢œè‰²ç±»å³å¯ï¼š
```jsx
const activeClass = "bg-gradient-to-r from-green-500/20 to-teal-600/20 text-white border border-green-500/30";
```

### Q: èƒ½å¦ä¸ºä¸åŒé¡µé¢è®¾ç½®ä¸åŒé«˜äº®é¢œè‰²ï¼Ÿ
A: å¯ä»¥ï¼Œä¿®æ”¹ `getLinkClass` å‡½æ•°ï¼š
```jsx
const getLinkClass = (path) => {
  const colorMap = {
    '/': 'from-blue-500/20 to-purple-600/20 border-blue-500/30',
    '/courses': 'from-green-500/20 to-teal-600/20 border-green-500/30',
    // ...
  };
  const gradient = colorMap[path] || 'from-blue-500/20 to-purple-600/20 border-blue-500/30';

  if (isActive(path)) {
    return `${baseClass} bg-gradient-to-r ${gradient} text-white shadow-lg`;
  }
  return `${baseClass} ${inactiveClass}`;
};
```

## æœªæ¥æ”¹è¿›

1. **é¢åŒ…å±‘å¯¼èˆª**
   - æ˜¾ç¤ºå½“å‰é¡µé¢çš„è·¯å¾„å±‚çº§
   - ä¾‹å¦‚ï¼šé¦–é¡µ > è¯¾ç¨‹ > è¯¾ç¨‹è¯¦æƒ…

2. **ç§»åŠ¨ç«¯èœå•**
   - æ±‰å ¡èœå•å›¾æ ‡
   - ä¾§è¾¹æ å¯¼èˆª
   - åŒæ ·æ”¯æŒè·¯ç”±é«˜äº®

3. **æ´»è·ƒæŒ‡ç¤ºå™¨**
   - åº•éƒ¨æ»‘åŠ¨æ¡
   - å·¦ä¾§ç«–çº¿
   - åŠ¨ç”»è¿‡æ¸¡æ•ˆæœ

4. **é”®ç›˜å¯¼èˆª**
   - Tab é”®åˆ‡æ¢
   - Enter é”®é€‰æ‹©
   - é«˜äº®å½“å‰ç„¦ç‚¹

## æ€»ç»“

è¿™æ¬¡æ·»åŠ çš„è·¯ç”±é«˜äº®åŠŸèƒ½ï¼š

1. âœ… **è§†è§‰åé¦ˆ** - ç”¨æˆ·æ¸…æ¥šçŸ¥é“å½“å‰ä½ç½®
2. âœ… **ç¾è§‚è®¾è®¡** - æ¸å˜èƒŒæ™¯ + å‘å…‰è¾¹æ¡†
3. âœ… **æµç•…åŠ¨ç”»** - æ‰€æœ‰å˜åŒ–éƒ½æœ‰è¿‡æ¸¡æ•ˆæœ
4. âœ… **å“åº”å¼** - é€‚é…ä¸åŒå±å¹•å°ºå¯¸
5. âœ… **æ˜“äºå®šåˆ¶** - ç®€å•ä¿®æ”¹å³å¯æ›´æ¢ä¸»é¢˜
6. âœ… **æ€§èƒ½ä¼˜åŒ–** - ä½¿ç”¨ CSS ç±»ï¼Œé¿å…ä¸å¿…è¦çš„è®¡ç®—

ç°åœ¨ç”¨æˆ·å¯ä»¥ä¸€çœ¼çœ‹å‡ºè‡ªå·±åœ¨å“ªä¸ªé¡µé¢äº†ï¼

---

**åŠŸèƒ½æ—¥æœŸ**: 2024-01-25
**åŠŸèƒ½ç‰ˆæœ¬**: v1.3.0
**çŠ¶æ€**: âœ… å®Œæˆ
